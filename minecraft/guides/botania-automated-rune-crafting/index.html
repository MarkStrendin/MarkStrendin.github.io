<html>
<head>
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<style type="text/css">
		html {
			font-family: sans-serif;
		}

		li {
			margin-top: 9px;
		}
	</style>
</head>
<body style="background: url(../bg.png) no-repeat center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;">
	<div style="width: 800px; margin: 50px auto; background-color: rgba(255,255,255,0.85); padding: 25px; border-radius: 5px; padding-top: 5px;">

		<h1>Automating the Runic Altar with Applied Energistics, Modular Routers, and Integrated Dynamics</h1>
		<p>
            This article describes how I automated the Botania Runic Altar with Applied Energistics, Modular Routers, and Integrated Dynamics. There are certainly other ways to automate this (including using no additional mods outside of Botania), but this is how I did it.
        </p>
        <h2>Required mods</h2>
        <p>
            <ul>
                <li>Botania</li>
                <li>Modular Routers</li>
                <li>Integrated Dynamics</li>
                <li>(Optional) Applied Energistics</li>
                <ul>
                    <li>This example uses Applied Energistics, but it's only purpose as far as this build is concerned is to provide it with the ingredients. This exact setup would likely work with any mod that can provide the exact ingredients into it's chest (Refined Storage, for example).</li>
                </ul>
            </ul>
        </p>

        <h2>The Build</h2>
        <p>
            <img src="RunicAltarDiagram_01.png" style="width: 100%"/>
            <img src="RunicAltarDiagram_02.png" style="width: 100%"/>

            <ul>
                <li><b>A: Botania Runic Altar</b> (the thing we are automating)</li>
                <li><b>B: "Placer" Modular Router</b>. This one places ingredients on the altar, and places the final Living Stone block. By having it "right click" the blocks into the altar, instead of using a dropper or Botania Open Crate, we can more easily "vacuum" up the final crafted rune without worrying that any ingredients from the <i>next</i> craft might get vacuumed up, which would break the craft and leave the system in a broken state.</li>
                <li><b>C: "Wand" Modular Router</b>. This one right clicks the Runic Altar with a Wand of the Forest when the crafted rune is ready.</li>
                <li><b>D: "Distributor" Modular Router</b>. This one passes items to <b>Modular Router B</b> to place on the altar, ensuring that Living Stone is kept behind until the altar is ready. It's possible to make this setup without this extra Modular Router, but this ensures that if it happens to take more than 5 minutes to charge the altar with mana, the Living Stone won't despawn, because it's only added when needed.</li>
                <li><b>E: "Vacuum" Moduler Router</b>. This one "vacuums" up the newly crafted rune, as well as any runes that were used as ingredients but were not consumed.
                <li><b>F: Integrated Dynamics Variable Store.</b></li>
                <li><b>G: Integrated Dynamics Redstone Writer</b>. Pointed at the bottom side of <b>C: "Wand" Modular Router</b>, this one lets the "Wand" modular router know when the Runic Altar is finished crafting, and is ready to be right clicked with a Wand of the Forest.</li>
                <li><b>H: Integrated Dynamics Redstone Writer</b>.</li>
                <li><b>I: Integrated Dynamics Redstone Writer</b>.</li>
                <li><b>J: Integrated Dynamics Redstone Reader</b></li>
                <li><b>K: Integrated Dynamics Redstone Reader</b></li>
                <li><b>L: Chest</b>. This is where the raw ingredients are deposited by the Applied Energistics system.</li>
                <li><b>M: Applied Energistics Pattern Provider</b>. This allows an Applied Energistics system to auto-craft. It holds the pattern for the rune, and it deposits the ingredients into the chest when a craft is triggered. It is set to lock until the completed item is returned, to ensure that only one item at a time is crafted - this allows the system to work for <i>any</i>rune without extra fiddling.</li>
            </ul>
        </p>

        <h2>Parts List</h2>
        <ul>
            <li>Botania</li>
            <ul>
                <li>1 Runic Altar</li>
                <li>1 Wand of the Forest</li>
            </ul>

            <li>Modular Routers</li>
            <ul>
                <li>4 Modular Routers</li>
                <li>1 Vacuum Module</li>
                <li>2 Activator Modules</li>
                <li>1 Dropper Module</li>
                <li>2 Puller Module Mk2</li>
                <li>2 Sender Module Mk2</li>
                <li>2 Camoflauge Upgrades (Optional)</li>
                <li>1 Tag Filter</li>
            </ul>


            <li>Integrated Dynamics</li>
            <ul>
                <li>2 Redstone Readers</li>
                <li>3 Redstone Writers</li>
                <li>1 Variable Store</li>
                <li>5 Logic Cable</li>
                <li>7 Variable cards</li>
                <li>A Logic Programmer or a Portable Logic Programmer</li>
                <li>Suggested: A Labeller, to label your variables</li>
            </ul>


            <li>Minecraft</li>
            <ul>
                <li>1 Chest or Barrel</li>
            </ul>

            <li>If using Applied Energistics:</li>
            <ul>
                <li>1 Pattern Provider</li>
                <li>1 Pattern, encoded with a <b>Processing Recipe</b> for each rune you wish to auto-craft.</li>
            </ul>
        </ul>

        <h2>Component details</h2>

        <h3>A: Botania Runic Altar</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_A.png" style="max-width: 50%;"/>
        </div>
        <p>Just a Runic Altar. There is nothing to configure here, so this section will be very brief. Make sure that while you are building this setup that stray items don't drop on it, or it will pick them up and it might be difficult to tell that your setup is broken (especially if it's something barely visible like Mana Glass)</p>

        <h3>B: "Placer" Modular Router (left side)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_B.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Left_Config.png" style="max-width: 50%;"/>
        </div>
        <p>
            This Modular Router places the ingredients onto the Runic Altar. It receives items from another Modular Router, so it doesn't need to worry about pulling items from anywhere.
        </p>
        <p>
            <ul>
                <li>This Modular Router is set to <b>Redstone: High</b>, so that it only functions when it receives a redstone signal.</li>
                <li>Eco-Mode is not neccessary (but will help reduce lag on a server, so it's a good idea to turn it on)</li>
                <li>This Modular Router contains two modules:</li>
                <ul>
                    <li>An <b>Activator Module</b>, which "right clicks" ingredients into the Runic Altar.</li>
                    <li>A <b>Dropper Module</b>, which drops the final Living Stone at the end, which needs to be dropped into the world rather than right-clicked in.
                </ul>
                <li>The 9 Speed Upgrades in the example image are not required (they just make it work faster).</li>
            </ul>
        </p>
        <p>
            By using an Activator Module to deliver ingredients to the Runic Altar, we reduce the number of items that are ever dropped into the world, which can create lag and can cause issues if items disappear "in flight" due to server mods, villagers eating food items, players with "magnet" type equipment, etc. My setup is in an active village, so dropped food items often disappear, and this helped avoid this issue.
        </p>

        <h4>Modules in "B" Modular Router</h4>

        <h5>Activator Module ("B" Modular Router)</h5>
        <p>
            <div style="width: 100%; text-align: left;">
                <img src="MR_Left_module_activator.png" style="max-width: 50%;"/>
            </div>
            <ul>
                <li>Is in <b>Blacklist</b> mode, with <b>Living Stone</b> in the blacklist.</li>
                <li>Is set with the default right-click action and settings - no changes needed from the defaults.</li>
                <li>Has it's direction set towards the Runic Altar (to the right, if you are building it exactly like the images in this article)</li>
            </ul>
        </p>

        <h5>Dropper Module ("B" Modular Router)</h5>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Left_Module_dropper.png" style="max-width: 50%;"/>
        </div>
        <p>
            <ul>
                <li>Is in <b>Whitelist</b> mode, with <b>Living Stone</b> in the whitelist. All other settings are default.</li>
                <li>Has it's direction set towards the Runic Altar (to the right, if you are building it exactly like the images in this article)</li>
            </ul>
            This is how we "Right click" all of the other ingredients in, but "drop" the Living Stone - Living Stone is ignored by the Activator Module, but is the focus of this Dropper Module.
            <br/>
        </p>
        <br/><br/>


        <h3>C: "Wand" Modular Router (right side)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_C.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Right_config.png" style="max-width: 50%;"/>
        </div>
        <p>
            This module right clicks the Runic Altar with a Wand of the Forest, when the crafting has reached that point.
        </p>
        <p>
            <ul>
                <li>This Modular Router is set to <b>Redstone: High</b>, so that it only functions when it receives a redstone signal.</li>
                <li>This Modular Router must have a <b>Wand of the Forest</b> in it's inventory slot.</li>
                <li>This Modular Router has 1 module, a single <b>Activator Module</b>
            </ul>
        </p>

        <h5>Activator Module ("B" Modular Router)</h5>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Right_Module_Activator.png" style="max-width: 50%;"/>
        </div>
        <p>
            This handles right clicking the Runic Altar.
            <ul>
                <li>Has it's direction set towards the Runic Altar (to the left, if you are building it exactly like the images in this article)</li>
                <li>All other settings are default.</li>
            </ul>
            <br/>
        </p>


        <h3>D: "Distributor" Modular Router (bottom-left)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_D.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Feeder_config.png" style="max-width: 50%;"/>
        </div>
        <p>

            <ul>
                <li></li>
             </ul>
            <br/>
        </p>


        <h3>E: "Vacuum" Moduler Router (Middle foreground)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_E.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Vacuum_config.png" style="max-width: 50%;"/>
        </div>
        <p>
            This Modular Router picks up the crafted runes once they are complete. The Runic Altar will drop them into the world around itself, so a "Vacuum" capability is required.
        </p>
        <p>You could easily replace this with a HopperHock, or any other vacuum chest, or other mechanism to pick up dropped items (Rats, Golems, etc). You'll want to blacklist Living Stone, so you don't pick up the final Living Stone that must be dropped onto the Runic Alter to finish the crafting process.</p>
        <p>
            This Modular Router has two modules:
            <ul>
                <li>A <b>Vacuum Module</b> to pick up dropped items</li>
                <li>A <b>Sender Mk2 Module</b> to send the picked up items back to the AE2 sysetem (or wherever you want the end result items to go)</li>
             </ul>
             You can optionally add up to 9 <b>Speed Upgrades</b> and a <b>stack upgrade</b> or two, to ensure it picks up the dropped items in a timely manner. In the image I have 3 stack upgrades - this is overkill.
        </p>

        <h5>Vacuum Module ("E" Vacuum Router)</h5>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Vacuum_module_vacuum.png" style="max-width: 50%;"/>
        </div>
        <p>
            This handles right clicking the Runic Altar.
            <ul>
                <li>Has it's direction set <b>up</b>. If you place yours in a different place than I did, adjust this direction accordinly.</li>
                <li>This module is set to <b>whitelist</b> mode, with a <b>Tag Filter</b> (details below).</li>
                <li>The module has <b>3 Range Down Augments</b> to limit it's range, so it doesn't interfere with other nearby automations, or other machines that drop items (like a Petal Apothacary, which you might put near your Runic Altar)</li>
                <li>All other settings are default.</li>
            </ul>
            <br/>
        </p>

        <h5>Tag Filter configuration for "E" Vacuum Router</h5>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Vacuum_module_vacuum_filter.png" style="max-width: 50%;"/>
        </div>
        <p>
            The <b>Tag Filter</b> should be configured with the tag <code>botania:runes</code>. To do this, craft a rune manually, then craft a new <b>tag filter</b>. Right click the tag filter and put the rune in the slot at the top. Use the dropdown box to select <code>botania:runes</code>, then click the "+" button to add that tag to the list. Do not select the <code>mythicbotany:runes</code> one you might see (if you also have Mythic Botany installed), because this will cause the system to fail to pick up normal Botania runes (<code>botania:runes</code> will include MythicBotany runes as well)
        </p>


        <h5>Sender Mk2 Module ("E" Vacuum Router)</h5>
        <div style="width: 100%; text-align: left;">
            <img src="MR_Vacuum_module_sender.png" style="max-width: 50%;"/>
        </div>
        <p>
            This sends any picked up item back to your base's inventory - in my case, to the Applied Energistics 2 Pattern Provider, which will automatically insert the items back into storage.
            <ul>
                <li>With this module in your hand, shift+right click the block where you want the final crafted rune to be sent to. In  my case, this is the <b>Pattern Provider</b>.
                <li><b>DO NOT SEND ITEMS BACK TO THE INPUT CHEST!</b> This will cause them to get re-imported into the Runic Altar, and it will break until you manually clean out the items from the Runic Alter. If you are not sending back to an AE2 system like I am, send the output to a <i>different</i> chest, or some other storage.</li>
                <li>All other settings are default.</li>
            </ul>
            <br/>
        </p>


        <h3>F: Integrated Dynamics Variable Store</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_F.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="ID_VariableStore_Composited.png" style="max-width: 50%;"/>
        </div>
        <p>
            You'll want to place all the blocks before you start collecting variables to put in here. There is a section below that explains what that means, if you have never used Integrated Dynamics before.
        </p>
        <p>
            The variables we'll <i>eventually</i> have in here are:
            <ul>
                <li>An <b>Integer</b> of <b>0</b> (zero)</li>
                <li>An <b>Integer</b> of <b>2</b> (two)</li>
                <li>A reference to the <b>Comparator</b> value of the <b>Redstone Reader</b> attached to the <b>Runic Altar</b></li>
                <li>A reference to the <b>Comparator</b> value of the <b>Redstone Reader</b> attached to the <b>"Placer" Modular Router</b></li>
             </ul>
            <br/>
        </p>
        <p>The "Part ID" and "Variable ID" values in the screenshot are not important, your numbers will be different than mine were.</p>
        <p>The positioning of the variables in the Variable Store do not matter at all.</p>

        <h4>How to collect the correct variable cards while you build</h4>
        <p>Don't try to set up variable cards while you build - place down all of the blocks and make sure they are in the correct spots, <i>then</i> come back and set up the variable cards.</p>
        <p>If you move any of the Integrated Dynamics blocks (including the cables), it may break your variables, and you may need to set them up again.


        <h3>G: Integrated Dynamics Redstone Writer (Bottom side of "Wand" MR)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_G.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="ID_RightMR_config.png" style="max-width: 50%;"/>
        </div>
        <p>

            <ul>
                <li></li>
             </ul>
            <br/>
        </p>

        <h3>H: Integrated Dynamics Redstone Writer (Bottom side of "Placer" MR)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_H.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="ID_LeftMR_Config.png" style="max-width: 50%;"/>
        </div>
        <p>

            <ul>
                <li></li>
             </ul>
            <br/>
        </p>

        <h3>I: Integrated Dynamics Redstone Writer (Top side of "Distributor" MR)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_I.png" style="max-width: 50%;"/>
        </div>
        <div style="width: 100%; text-align: left;">
            <img src="ID_FeederMR_Config.png" style="max-width: 50%;"/>
        </div>
        <p>

            <ul>
                <li></li>
             </ul>
            <br/>
        </p>


        <h3>J: Integrated Dynamics Redstone Reader (Back side of "Placer" MR)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_J.png" style="max-width: 50%;"/>
        </div>
        <p>

            <ul>
                <li></li>
             </ul>
            <br/>
        </p>


        <h3>K: Integrated Dynamics Redstone Reader (bottom side of Runic Altar)</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_K.png" style="max-width: 50%;"/>
        </div>
        <p>

            <ul>
                <li></li>
             </ul>
            <br/>
        </p>


        <h3>L: Chest</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_L.png" style="max-width: 50%;"/>
        </div>
        <p>
            <ul>
                <li>Just a normal chest. Any block with an inventory will work here, including all types of chests (including modded ones), barrels, shulker boxes, sophisticated backpacks, hoppers, etc. It needs to hold all of the ingredients for the rune you are trying to craft, so it should have at least 8-10 slots.</li>
                <li>The position of this chest (and the AE2 Pattern Provider) do not matter, as long as they are within range of the "Distributor" "D" Modular Router. The puller modules used in this tutorial do not require line-of-sight, and have a maximum range of 12 (or 24 with max range upgrades)</li>
             </ul>
            <br/>
        </p>


        <h3>M: Applied Energistics Pattern Provider</h3>
        <div style="width: 100%; text-align: left;">
            <img src="Part_M.png" style="max-width: 50%;"/>
        </div>
        <p>
            Just a normal pattern provider, which as of the version of Applied Energistics I'm using, is the standard way for an AE system to provide crafting ingredients for auto-crafting jobs. If you are not familliar with Applied Energistics, this block contains a "pattern" for each type of item it can craft, and it provides the ingredients for any requested items into the chest.
        </p>
        <p>
            You will want to set it to <b>Lock until it receives the crafted item back</b>. This can be done by clicking into the Pattern Provider's interface and using the small buttons on the left edge. This setting ensure that the AE system only deposits the ingredients for one item at a time, and won't deposit any more until it receives the crafted item back and knows that it's finished.
        </p>
        <p>
            If you are not using Applied Energistics, you will need to find a way to insert the ingredients for exactly 1 (one) rune at a time into the chest "L". You can probably do this with mods similar to Applied Energistics, such as Refined Storage, but since I am an Applied Energistics user, I am not familliar with other mods that do the same thing.
        </p>

        <br/><br/>
        <h2>How to get the Integrated Dynamics variables</h2>
        <p>
        </p>


        <br/><Br/>
        <h2>Putting this in a base</h2>
        <img src="BotaniaRunicAlter_Headline.png" style="max-width: 100%"/>
        <p>
            This setup can be fairly easily hidden underground, with the two above-ground Modular Routers using camoflauge upgrades to hide as whatever block makes sense (in the example image they are mossy cobblestone stairs, specifically a corner piece, to hide the Integrated Dynamics Redstone Reader on the back of them).
        </p>
        <p>
            This setup is fairly compact, and can be easily scaled out to as many as you want. I use 4 of these, each with different runes that it has the patterns for so that it can make multiple runes at the same time.
        </p>
        <img src="Finished_Uncovered.png" style="max-width: 100%"/>
        <img src="Finished_Covered.png" style="max-width: 100%"/>

	</div>
</body>
</html>
